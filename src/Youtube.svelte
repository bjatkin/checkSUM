{#if activepage != 'created' || user.user_old_enough}
    <div class="parent">
        <div class="logo">
            <svg viewBox="0 0 200 60" preserveAspectRatio="xMidYMid meet" focusable="false" class="style-scope ytd-topbar-logo-renderer" style="pointer-events: none; display: block; width: 100%; height: 100%;">
                <g viewBox="0 0 200 60" preserveAspectRatio="xMidYMid meet" class="style-scope ytd-topbar-logo-renderer">
            <g class="style-scope ytd-topbar-logo-renderer">
            <path fill="#FF0000" d="M63,14.87c-0.72-2.7-2.85-4.83-5.56-5.56C52.54,8,32.88,8,32.88,8S13.23,8,8.32,9.31
                c-2.7,0.72-4.83,2.85-5.56,5.56C1.45,19.77,1.45,30,1.45,30s0,10.23,1.31,15.13c0.72,2.7,2.85,4.83,5.56,5.56
                C13.23,52,32.88,52,32.88,52s19.66,0,24.56-1.31c2.7-0.72,4.83-2.85,5.56-5.56C64.31,40.23,64.31,30,64.31,30
                S64.31,19.77,63,14.87z" class="style-scope ytd-topbar-logo-renderer"></path>
            <polygon fill="#FFFFFF" points="26.6,39.43 42.93,30 26.6,20.57" class="style-scope ytd-topbar-logo-renderer"></polygon>
            </g>
            <g class="style-scope ytd-topbar-logo-renderer">
            <g id="youtube-paths" class="style-scope ytd-topbar-logo-renderer">
                <path fill="#282828" d="M92.69,48.03c-1.24-0.84-2.13-2.14-2.65-3.91c-0.52-1.77-0.79-4.12-0.79-7.06v-4
                c0-2.97,0.3-5.35,0.9-7.15c0.6-1.8,1.54-3.11,2.81-3.93c1.27-0.82,2.94-1.24,5.01-1.24c2.04,0,3.67,0.42,4.9,1.26
                c1.23,0.84,2.13,2.15,2.7,3.93c0.57,1.78,0.85,4.16,0.85,7.12v4c0,2.94-0.28,5.3-0.83,7.08c-0.55,1.78-1.45,3.09-2.7,3.91
                c-1.24,0.82-2.93,1.24-5.06,1.24C95.65,49.29,93.93,48.87,92.69,48.03z M99.66,43.71c0.34-0.9,0.52-2.37,0.52-4.4v-8.59
                c0-1.98-0.17-3.42-0.52-4.34c-0.34-0.91-0.95-1.37-1.82-1.37c-0.84,0-1.43,0.46-1.78,1.37c-0.34,0.91-0.52,2.36-0.52,4.34v8.59
                c0,2.04,0.16,3.51,0.49,4.4c0.33,0.9,0.93,1.35,1.8,1.35C98.71,45.06,99.31,44.61,99.66,43.71z" class="style-scope ytd-topbar-logo-renderer"></path>
                <path fill="#282828" d="M188.16,37.13v1.39c0,1.77,0.05,3.09,0.16,3.98c0.1,0.88,0.32,1.53,0.65,1.93
                c0.33,0.4,0.84,0.61,1.53,0.61c0.93,0,1.57-0.36,1.91-1.08c0.34-0.72,0.53-1.92,0.56-3.6l5.35,0.31
                c0.03,0.24,0.04,0.57,0.04,0.99c0,2.55-0.7,4.45-2.09,5.71c-1.39,1.26-3.36,1.89-5.91,1.89c-3.06,0-5.2-0.96-6.43-2.88
                c-1.23-1.92-1.84-4.88-1.84-8.9v-4.81c0-4.14,0.64-7.15,1.91-9.06c1.27-1.9,3.45-2.85,6.54-2.85c2.13,0,3.76,0.39,4.9,1.17
                c1.14,0.78,1.94,1.99,2.41,3.64c0.46,1.65,0.7,3.93,0.7,6.83v4.72H188.16z M188.95,25.53c-0.31,0.39-0.52,1.03-0.63,1.91
                c-0.11,0.88-0.16,2.23-0.16,4.02v1.98h4.54v-1.98c0-1.77-0.06-3.11-0.18-4.02c-0.12-0.91-0.34-1.56-0.65-1.93
                c-0.31-0.37-0.8-0.56-1.46-0.56C189.75,24.94,189.26,25.14,188.95,25.53z" class="style-scope ytd-topbar-logo-renderer"></path>
                <path fill="#282828" d="M77.59,36.61l-7.06-25.49h6.16l2.47,11.55c0.63,2.85,1.09,5.27,1.39,7.28h0.18
                c0.21-1.44,0.67-3.85,1.39-7.24l2.56-11.6h6.16L83.7,36.61v12.23h-6.11V36.61z" class="style-scope ytd-topbar-logo-renderer"></path>
                <path fill="#282828" d="M126.45,21.28v27.55h-4.85l-0.54-3.37h-0.13c-1.32,2.55-3.3,3.82-5.93,3.82c-1.83,0-3.18-0.6-4.05-1.8
                c-0.87-1.2-1.3-3.07-1.3-5.62V21.28h6.2v20.23c0,1.23,0.13,2.11,0.4,2.63c0.27,0.52,0.72,0.79,1.35,0.79
                c0.54,0,1.06-0.16,1.55-0.49c0.49-0.33,0.86-0.75,1.1-1.26V21.28H126.45z" class="style-scope ytd-topbar-logo-renderer"></path>
                <path fill="#282828" d="M158.27,21.28v27.55h-4.85l-0.54-3.37h-0.13c-1.32,2.55-3.3,3.82-5.93,3.82c-1.83,0-3.18-0.6-4.05-1.8
                c-0.87-1.2-1.3-3.07-1.3-5.62V21.28h6.2v20.23c0,1.23,0.13,2.11,0.4,2.63c0.27,0.52,0.72,0.79,1.35,0.79
                c0.54,0,1.06-0.16,1.55-0.49c0.49-0.33,0.86-0.75,1.1-1.26V21.28H158.27z" class="style-scope ytd-topbar-logo-renderer"></path>
                <path fill="#282828" d="M143.31,16.11h-6.16v32.72h-6.07V16.11h-6.16v-4.99h18.38V16.11z" class="style-scope ytd-topbar-logo-renderer"></path>
                <path fill="#282828" d="M178.8,25.69c-0.38-1.74-0.98-3-1.82-3.78c-0.84-0.78-1.99-1.17-3.46-1.17c-1.14,0-2.2,0.32-3.19,0.97
                c-0.99,0.64-1.75,1.49-2.29,2.54h-0.05l0-14.52h-5.98v39.11h5.12l0.63-2.61h0.13c0.48,0.93,1.2,1.66,2.16,2.2
                c0.96,0.54,2.02,0.81,3.19,0.81c2.1,0,3.64-0.97,4.63-2.9c0.99-1.93,1.48-4.95,1.48-9.06v-4.36
                C179.36,29.84,179.17,27.43,178.8,25.69z M173.11,36.93c0,2.01-0.08,3.58-0.25,4.72c-0.16,1.14-0.44,1.95-0.83,2.43
                c-0.39,0.48-0.91,0.72-1.57,0.72c-0.51,0-0.98-0.12-1.42-0.36c-0.43-0.24-0.79-0.6-1.06-1.08V27.71
                c0.21-0.75,0.57-1.36,1.08-1.84c0.51-0.48,1.06-0.72,1.66-0.72c0.63,0,1.12,0.25,1.46,0.74c0.34,0.49,0.58,1.33,0.72,2.49
                c0.13,1.17,0.2,2.83,0.2,4.99V36.93z" class="style-scope ytd-topbar-logo-renderer"></path>
            </g>
            </g>
        </g>
        </svg>
        </div>
    </div>
{/if}
{#if activepage != 'Account' && activepage != 'SignUp' && activepage != 'created'}
        <div class="parent">
            <div class="center">
                <div class="mdc-typography--headline4 theme-youprimary-color">Sign In</div>
                <p class="mdc-typography--body1 theme-error-color">{errorMsg}</p>
            </div>
            <div>
                <div class="center">
                    <Textfield 
                        type="email" 
                        variant="outlined"
                        bind:value={userEmail} 
                        label="Email *" 
                        input$aria-controls="helper-text-outlined-a" 
                        input$aria-describedby="helper-text-outlined-a" 
                        style="width: 100%"
                        />
                    <HelperText id="helper-text-outlined-a">Enter Your Email</HelperText>
                </div>
                <div class="center">
                    <Textfield 
                        type="password"
                        variant="outlined"
                        bind:value={userPassword}
                        label="Password *"
                        input$aria-controls="helper-text-outlined-a"
                        input$aria-describedby="helper-text-outlined-a"
                        style="width: 100%;"
                        />
                    <HelperText id="helper-text-outlined-a">Enter Your Password</HelperText>
                </div>
                <div class="center">
                    <Button variant="raised" style="width: 100%; color: white; background-color:#e64a24;" on:click={login}><Label>SIGN IN</Label></Button>
                </div>
                <div>
                    <Button color="secondary" style="color:#0860d4;" on:click={() => alert("Forgot Password!!")}><Label>forgot password?</Label></Button>
                    <Button color="secondary" style="color:#0860d4;" on:click={signup}><Label>Don't have an account?<br/>Sign Up</Label></Button>
                </div>
            </div>
        </div>
{/if}

{#if activepage == 'Account'}
    <div class="parent">
        <div class="title">
            <div class="mdc-typography--headline3 theme-youprimary-color">Welcome back {user.fname}!</div>
            <p class="mdc-typography--body1 theme-error-color">{errorMsg}</p>
        </div>
        <div class="center">
            <div class="mdc-typography--headline6 theme-yousecondary-color"> Recommendations </div>
        </div>
        <div>
            <div>
                <iframe width="600" height="315"src="https://www.youtube.com/embed/i51gcWCs-Ho" title="Give Thanks"></iframe>
                <iframe width="600" height="315"src="https://www.youtube.com/embed/HSndhYOUyAY" title="Hear Him"></iframe>
            </div>
            <div>
                <iframe width="600" height="315"src="https://www.youtube.com/embed/naqX9iYE0V0" title="Lessons Learned"></iframe>
                <iframe width="600" height="315"src="https://www.youtube.com/embed/oM0oRLEsfu0" title="Share the Gospel"></iframe>
            </div>
            <div>
                <iframe width="600" height="315"src="https://www.youtube.com/embed/VyNBpZKYABs" title="Light the World"></iframe>
                <iframe width="600" height="315"src="https://www.youtube.com/embed/WyxXGdG3-Io" title="Vocal Point"></iframe>
            </div>
        </div>
    </div>
{/if}

{#if activepage == 'SignUp'}
    <div class="parent head">
        <div class="center">
            <div class="mdc-typography--headline6 theme-youprimary-color">Sign Up</div>
        </div>
    </div>

    {#if user.firstpage}
        <div class="parent">
            <div class="center">
                <Textfield style="width: 100%;" type="email" variant="outlined" bind:value={user.email} label="Email*" input$aria-controls="helper-text-outlined-a" input$aria-describedby="helper-text-outlined-a" />
                <HelperText id="helper-text-outlined-a">Enter Your Email Address</HelperText>
            </div>
            <div class="center">
                <Textfield style="width: 100%;" type="email" variant="outlined" bind:value={user.confirmEmail} label="Confirm Email*" input$aria-controls="helper-text-outlined-a" input$aria-describedby="helper-text-outlined-a" />
                <HelperText id="helper-text-outlined-a">Re-Enter The Same Email Address</HelperText>
            </div>
            <hr>
            <div class="center">
                <Textfield style="width: 100%;" type="password" variant="outlined" bind:value={user.password} label="Password*" input$aria-controls="helper-text-outlined-a" input$aria-describedby="helper-text-outlined-a" />
                <HelperText id="helper-text-outlined-a">Enter The Account Password</HelperText>
            </div>
            <div class="center">
                <Textfield style="width: 100%;" type="password" variant="outlined" bind:value={user.confirmPassword} label="Confirm Password*" input$aria-controls="helper-text-outlined-a" input$aria-describedby="helper-text-outlined-a" />
                <HelperText id="helper-text-outlined-a">Re-Enter The Same Password</HelperText>
            </div>
            <hr>
            <div class="right">
                <Button style="color: white; width: 60%; background-color:#e64a24;" on:click={nextPage} variant="raised"><Label>Next</Label></Button>
            </div>
        </div>
    {/if}

    {#if !user.firstpage}
        <div class="parent">
            <div class="center">
                <Textfield style="width: 100%;" variant="outlined" bind:value={user.fname} label="First Name*" input$aria-controls="helper-text-outlined-a" input$aria-describedby="helper-text-outlined-a" />
                <HelperText id="helper-text-outlined-a">Enter Your First Name</HelperText>
            </div>
            <div class="center">
                <Textfield style="width: 100%;" variant="outlined" bind:value={user.lname} label="Last Name*" input$aria-controls="helper-text-outlined-a" input$aria-describedby="helper-text-outlined-a" />
                <HelperText id="helper-text-outlined-a">Enter Your Last Name</HelperText>
            </div>
            <hr>
            <div class="center">
                <Textfield style="width: 100%;" variant="outlined" bind:value={user.token} label="checkSUM token*" input$aria-controls="helper-text-outlined-a" input$aria-describedby="helper-text-outlined-a" />
                <HelperText id="helper-text-outlined-a">Enter checkSUM token to verify your age</HelperText>
                <svg style="width:175px; height: 50px;" viewBox="0 0 210 60">
                    <g id="layer1">
                        <rect
                        style="fill:#25cbea;fill-opacity:1;stroke:#000000;stroke-width:0;stroke-linecap:round;stroke-linejoin:round"
                        id="rect865"
                        width="210"
                        height="60"
                        x="0"
                        y="0"
                        ry="4.9540057" />
                        <path
                        id="rect887"
                        style="fill:#e89a40;fill-opacity:1;stroke:none;stroke-width:0.144273;stroke-opacity:1"
                        d="m 41.754279,13.103355 v 31.827692 h 6.414863 V 33.353983 a 2.4531599,2.4531599 0 0 1 -0.0039,-0.1307 2.4531599,2.4531599 0 0 1 2.45323,-2.452997 2.4531599,2.4531599 0 0 1 2.452285,2.401887 h 0.01719 v 11.759114 h 6.337375 V 33.171933 h -0.0016 a 8.7670845,8.7670845 0 0 0 -8.766589,-8.676614 8.7670845,8.7670845 0 0 0 -0.02446,0 8.7670845,8.7670845 0 0 0 -2.464063,0.36055 V 13.103355 Z" />
                        <path
                        id="circle954"
                        style="fill:#e89a40;fill-opacity:1;stroke:none;stroke-width:0.172211;stroke-opacity:1"
                        d="m 87.770982,23.289559 a 8.7670845,8.7670845 0 0 0 -8.737358,8.467017 h -0.0063 v 6.685684 h 0.0087 a 8.7670845,8.7670845 0 0 0 8.759718,8.410267 8.7670845,8.7670845 0 0 0 8.760649,-8.436167 h -6.368894 a 2.4145293,2.4145293 0 0 1 -2.391755,2.08372 2.4145293,2.4145293 0 0 1 -2.410598,-2.28061 v -0.26517 -5.763684 -0.27012 a 2.4145293,2.4145293 0 0 1 2.383748,-2.27826 2.4145293,2.4145293 0 0 1 0.0268,0 2.4145293,2.4145293 0 0 1 2.398345,2.13695 h 6.364174 a 8.7670845,8.7670845 0 0 0 -8.762519,-8.489627 8.7670845,8.7670845 0 0 0 -0.0245,0 z" />
                        <path
                        id="rect966"
                        style="fill:#e89a40;fill-opacity:1;stroke:none;stroke-width:0.144273;stroke-opacity:1"
                        d="m 97.460905,13.103355 v 31.827692 h 6.414845 v -7.871194 l 5.79006,7.831404 h 7.56882 l -10.35576,-14.006761 8.37,-10.351034 h -7.67055 l -3.70257,4.578877 V 13.103355 Z" />
                        <path
                        id="path1028"
                        style="fill:#e89a40;fill-opacity:1;stroke:none;stroke-width:0.172211;stroke-opacity:1"
                        d="m 69.443039,23.289559 a 8.7670845,8.7670845 0 0 0 -8.74233,8.767057 8.7670845,8.7670845 0 0 0 0.0254,0.665527 v 4.69568 a 8.7670845,8.7670845 0 0 0 -0.0254,0.667647 8.7670845,8.7670845 0 0 0 8.767058,8.767057 8.7670845,8.7670845 0 0 0 8.765151,-8.585947 h -6.357372 a 2.4145293,2.4145293 0 0 1 -2.407779,2.2335 2.4145293,2.4145293 0 0 1 -2.408019,-2.23892 h -0.0078 v -4.484677 h 11.178117 v -2.009067 a 8.7670845,8.7670845 0 0 0 -8.762321,-8.477857 8.7670845,8.7670845 0 0 0 -0.02446,0 z m -0.0023,6.352677 a 2.4145293,2.4145293 0 0 1 0.02681,0 2.4145293,2.4145293 0 0 1 2.396947,2.12448 h 0.03181 v 7.8e-4 h -4.844378 v -7.8e-4 h 0.01883 a 2.4145293,2.4145293 0 0 1 2.370092,-2.12448 z" />
                        <path
                        id="path1133"
                        style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.172495;stroke-opacity:1"
                        d="m 129.82006,12.341165 a 8.8636399,6.1680995 0 0 0 -8.86364,6.168087 8.8636399,6.1680995 0 0 0 4.1e-4,0.0419 h 0.0166 v 10.053264 a 3.0804648,2.1436581 0 0 0 -0.0238,0.2653 3.0804648,2.1436581 0 0 0 3.03666,2.14325 v 0.001 h 8.57366 v 9.806494 h 0.0307 a 2.7793054,1.9340849 0 0 1 -2.77052,1.78267 2.7793054,1.9340849 0 0 1 -2.75921,-1.70341 h 0.017 v -6.234107 h -6.12503 v 6.234137 h 0.01 a 8.8636414,6.1681005 0 0 0 8.85759,5.937357 8.8636414,6.1681005 0 0 0 8.86081,-6.018857 h -0.0513 V 29.293266 a 3.0804648,2.1436581 0 0 0 0.0606,-0.42326 3.0804648,2.1436581 0 0 0 -3.08029,-2.143527 3.0804648,2.1436581 0 0 0 -0.53592,0.0326 h -8.01717 v -8.257357 h -0.0162 a 2.7793054,1.9340849 0 0 1 2.7483,-1.92601 2.7793054,1.9340849 0 0 1 0.0311,0 2.7793054,1.9340849 0 0 1 2.77941,1.93388 2.7793054,1.9340849 0 0 1 -7.8e-4,0.0419 h 0.019 v 6.083217 h 6.04062 v -6.083217 h 0.025 a 8.8636399,6.1680995 0 0 0 4e-4,-0.0419 8.8636399,6.1680995 0 0 0 -8.86361,-6.168087 z" />
                        <path
                        id="circle1157"
                        style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.172495;stroke-opacity:1"
                        d="M 142.93731,13.283785 V 40.75284 h 0.005 a 8.8636414,6.1681005 0 0 0 8.86283,6.084347 8.8636414,6.1681005 0 0 0 8.86361,-6.168097 8.8636414,6.1681005 0 0 0 -4e-4,-0.0573 h -0.0537 V 13.316145 h -6.06968 V 40.82062 h 0.0307 a 2.7793054,1.9340849 0 0 1 -2.77051,1.78267 2.7793054,1.9340849 0 0 1 -2.77658,-1.85041 h 0.0352 V 13.283825 Z" />
                        <path
                        id="rect1167"
                        style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.28033;stroke-opacity:1"
                        d="m 164.42584,13.190755 0.0941,0.17032 v 32.475022 h 6.12058 V 24.442119 l 2.09808,3.798317 -0.042,0.0756 h 6.20984 0.0836 l -0.0416,-0.0756 2.12595,-3.849197 v 21.525238 h 6.06364 V 13.413065 l 0.12277,-0.22231 h -6.20984 l -5.20743,9.428214 -5.20785,-9.428214 z" />
                        <path
                        id="path1878"
                        style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.282904;stroke-opacity:1"
                        d="m 28.558463,10.036338 a 8.9489001,10.225126 0 0 0 -8.867675,10.076164 h 0.0072 V 31.225536 H 18.991089 V 46.596487 H 38.984184 V 31.225536 H 25.900744 V 20.112502 h 0.0016 a 2.7398914,3.1306346 0 0 1 2.729032,-2.98178 2.7398914,3.1306346 0 0 1 0.0078,0 2.7398914,3.1306346 0 0 1 2.731617,2.88607 v 4.649037 a 3.1129007,3.5118825 0 0 0 -0.02377,0.43543 3.1129007,3.5118825 0 0 0 3.112989,3.511737 3.1129007,3.5118825 0 0 0 3.112471,-3.511737 3.1129007,3.5118825 0 0 0 -10e-4,-0.0863 h 0.0041 v -4.902497 h 0.01137 a 8.9489001,10.225126 0 0 0 -8.947774,-10.076164 8.9489001,10.225126 0 0 0 -0.08062,0 z" />
                    </g>
                </svg>
            </div>
            <hr>
            <div class="right">
                <Button color="secondary" style="width: 35%; color:#0860d4;" on:click={() => user.firstpage = true}><Label>Back</Label></Button>
                <Button style="width: 60%; color: white; background-color:#e64a24;" on:click={createAccount} variant="raised"><Label>Create Account</Label></Button>
            </div>
        </div>
    {/if}
{/if}

{#if activepage == 'created'}
    {#if user.user_old_enough}
        <div class="parent">
            <div class="title">
                <div class="mdc-typography--headline3 theme-youprimary-color">Welcome {user.fname} to YouTube!</div>
                <p class="mdc-typography--body1 theme-error-color">{errorMsg}</p>
            </div>
            <div class="center">
                <div class="mdc-typography--headline6 theme-yousecondary-color"> Recommendations </div>
            </div>
            <div>
                <div>
                    <iframe width="600" height="315"src="https://www.youtube.com/embed/i51gcWCs-Ho" title="Give Thanks"></iframe>
                    <iframe width="600" height="315"src="https://www.youtube.com/embed/HSndhYOUyAY" title="Hear Him"></iframe>
                </div>
                <div>
                    <iframe width="600" height="315"src="https://www.youtube.com/embed/naqX9iYE0V0" title="Lessons Learned"></iframe>
                    <iframe width="600" height="315"src="https://www.youtube.com/embed/oM0oRLEsfu0" title="Share the Gospel"></iframe>
                </div>
                <div>
                    <iframe width="600" height="315"src="https://www.youtube.com/embed/VyNBpZKYABs" title="Light the World"></iframe>
                    <iframe width="600" height="315"src="https://www.youtube.com/embed/WyxXGdG3-Io" title="Vocal Point"></iframe>
                </div>
            </div>
        </div>
    {/if}

    {#if !user.user_old_enough}
        <div class="parent">
            <div class="title center">
                <img class="logo" src="https://kstatic.googleusercontent.com/files/036abc78be4c80a28e419ea31ff22a8805f39e0843676b839f0dc079fb05702b3c246fce0cd47e76364fcb421768cbaa1fcef88a27c2c09ec0b478a697a97cc9" alt="YouTube Kids" border="0">
                <div class="mdc-typography--headline4 theme-youprimary-color">We are sorry, you are too young to sign up for YouTube. 
                    Please sign up for <a href=https://www.youtube.com/kids>YouTube Kids</a></div>
                <p class="mdc-typography--body1 theme-error-color">{errorMsg}</p>
            </div>
        </div>
    {/if}
{/if}

<script>
    import Button, {Label}  from "@smui/button";
    import Textfield from '@smui/textfield';
    import HelperText from '@smui/textfield/helper-text/index';

    let user = { 
        firstpage: true,
        email: '',
        confirmEmail: '',
        password: '',
        confirmPassword: '',
        fname: '',
        lname: '',
        token: '',
        user_old_enough: '',
    };

    let activepage = "";
    let userEmail = '';
    let userPassword = '';
    let errorMsg = '';
    let baseURL = `http://localhost:8080/checkSUM/`; 

    let requestFirstName = (email) => {
        return fetch(baseURL+'request_fname', {
			method: "POST",
			headers: {
				"Content-Type": "application/json",
			},
			body: JSON.stringify({
				email: email
			}),
		}).
		then(resp => resp.json()).
		then(resp => {
			if (!resp.success) {
				throw new Error("Username or Password was not correct");
            }
            else {
                user.fname = resp.first_name
            }
			return resp;
		})
    }

    let login = () => {
        requestFirstName(userEmail).
        then(() => {
            activepage = 'Account'
        }).
        catch(e => {
            errorMsg = e.toString();
            setTimeout(() => {errorMsg = ""}, 2500);
        });
    }
    let signup = () => {
        activepage = 'SignUp'
    };

    let createAccount = () => {
        if (user.fname == "") {
            alert("No First Name: Please fill out all fields")
            return;
        }
        if (user.lname == "") {
            alert("No Last Name: Please fill out all fields")
            return;
        }
        if (user.token == "") {
            alert("No checkSUM token entered. Please enter one")
            return;
        }

        return fetch(baseURL+'verify_age', {
			method: "POST",
			headers: {
				"Content-Type": "application/json",
			},
			body: JSON.stringify({
				secret: user.token
			}),
		}).
		then(resp => resp.json()).
		then(resp => {
			if (!resp.user_is_13_or_older) {
                user.user_old_enough = false
                activepage = 'created'
            }
            else {
                user.user_old_enough = true
                activepage = 'created'
            }
			return resp;
		})
    };

    let nextPage= () => {
        if (user.email != user.confirmEmail) {
            alert("Emails do not match");
            return;
        }
        if (user.password != user.confirmPassword) {
            alert("Passwords do not match");
            return;
        }
        if (user.email == "") {
            alert("No email entered: Please fill out all fields")
            return;
        }
        if (user.password == "") {
            alert("No password entered: Please fill out all fields")
            return;
        }
        user.firstpage = false;
    };
</script>

<style>
    div {
        margin-top: 30px;
    }

    .parent {
        text-align: center;
        width: 100%;
    }

    .center {
        margin: auto;
        max-width: 400px;
    }

    .title {
        margin: auto;
        text-align: center;
        max-width: 800px;
    }

    .logo {
        margin: auto;
        width: 600px;
    }
    .head {
        margin: 40px 0px 20px;
    }

    .right {
        margin: auto;
        text-align: right;
        max-width: 400px;
    }
    hr {
        max-width: 440px;
    }
</style>
